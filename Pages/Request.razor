@page "/request"

@*@using System.Text.RegularExpressions
@using System.ComponentModel.DataAnnotations
@using MudBlazor
@using MudBlazor.Services
@inject BlazorServerCRUD.Data.DataContext dataContext
@inject NavigationManager navigationManager
@inject IDialogService dialogService*@
@inject RequestService RequestService

@*<MudGrid>
    <MudItem xs="12" sm="7">
        <MudPaper Class="pa-4">
            <MudForm @ref="mudForm" @bind-IsValid="@success" @bind-Errors="@errors">
                <MudTextField T="int" Label="Id" Required="true" @bind-Value="Id" RequiredError="Id is required" />

                <MudTextField T="string" Label="Name" Required="true" @bind-Value="Name" RequiredError="Name is required!" />
                <MudTextField T="string" Label="Email" Required="true" @bind-Value="Email" RequiredError="Email is required!" Validation="@(new EmailAddressAttribute() { ErrorMessage = "The email address is invalid" })" />
                <MudTextField @bind-Value="TextValue" Label="Enter your message here" Variant="Variant.Outlined" Margin="Margin.Dense"></MudTextField>
                <div class="d-flex align-center justify-space-between">
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" Disabled="@(!success)" Class="ml-auto" OnClick="@HandleSubmit">Submit</MudButton>
                </div>
            </MudForm>
        </MudPaper>
    </MudItem>
</MudGrid>

@if (success)
{
    <div class="alert alert-success" role="alert">
        Thank you, @Name, for submitting your request! We have received your message and will get back to you as soon as possible.
    </div>
}*@
<EditForm Model="user" >
    <div>
        <label for="name">Name</label>
        <InputText id="name" @bind-Value="user" class="form-control">Name</InputText>
    </div>
    <div>
        <label for="email">Email</label>
        <InputText id="email" @bind-Value="user" class="form-control">Email</InputText>
    </div>
    <div>
        <label for="year">Message</label>
        <InputDate id="message" @bind-Value="user" class="form-control"></InputDate>
    </div>
    <br />
   
</EditForm>


@code {

    Request user = new Request();
    //bool success;
    //MudForm mudForm;
    //string[] errors = { };
    //MudTextField<string> pwField1;
    //public int Id { get; set; }
    //public string Name { get; set; }
    //public string Email { get; set; }
    //public string TextValue { get; set; }

    //public async Task HandleSubmit()
    //{
    //    var request = new BlazorServerCRUD.Data.Request
    //        {
    //            Id = Guid.NewGuid(),
    //            Name = Name,
    //            Email = Email,
    //            Message = TextValue
    //        };

    //    RequestService.AddRequest(request);
    //    dataContext.Requests.Add(request);
    //    await dataContext.SaveChangesAsync();

    protected override async Task OnParametersSetAsync()
    {

       
        
    }
        
        

    //    success = true;
    //}
}
